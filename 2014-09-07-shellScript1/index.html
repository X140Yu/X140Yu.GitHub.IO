<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="走进 shell script - 变量">




  <meta name="keywords" content="技术, X140Yu's Blog">










  <link rel="alternate" href="/atom.xml" title="X140Yu's Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.1">



<link rel="canonical" href="https://x140yu.github.io/2014-09-07-shellScript1/">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.1">



  
  <script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e3a87e709bb71d639f8a7b07fe411881";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102142985-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-102142985-1');
</script>


  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "DoDg8Bwgi002rkBzkdWjJhGN-gzGzoHsz",
      appKey: "Uj8vhWY0bvdNySseOuCmtnPB"
    });
  </script>





<script>
  window.config = {"leancloud":{"app_id":"DoDg8Bwgi002rkBzkdWjJhGN-gzGzoHsz","app_key":"Uj8vhWY0bvdNySseOuCmtnPB"},"toc":true,"fancybox":true,"pjax":true};
</script>

    <title> 走进 shell script - 变量 - X140Yu's Blog </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">X140Yu's Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">X140Yu's Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              About
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          走进 shell script - 变量
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2014-09-07
        </span>
        
        
        <span class="post-visits" data-url="/2014-09-07-shellScript1/" data-title="走进 shell script - 变量">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    
  <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title">Contents</h2>
    <div class="post-toc-content">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#什么是-shell"><span class="toc-text">什么是 shell</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#什么是-shell-脚本"><span class="toc-text">什么是 shell 脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell-脚本的优缺点"><span class="toc-text">shell 脚本的优缺点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#优点："><span class="toc-text">优点：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缺点："><span class="toc-text">缺点：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#为什么要学习-shell-脚本"><span class="toc-text">为什么要学习 shell 脚本</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#开始写-shell-脚本"><span class="toc-text">开始写 shell 脚本</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#第一个-shell-脚本"><span class="toc-text">第一个 shell 脚本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#变量"><span class="toc-text">变量</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#变量的分类"><span class="toc-text">变量的分类</span></a></li></ol></li></ol></li></ol>
    </div>
  </div>



    <div class="post-content">
      
        <h1 id="什么是-shell"><a href="#什么是-shell" class="headerlink" title="什么是 shell"></a>什么是 shell</h1><p>通俗地来讲，shell 就是操作系统提供给用户和内核交流的一种命令解释器，它可以互动地解释用户输入的命令，并加以处理。</p>
<a id="more"></a>
<h2 id="什么是-shell-脚本"><a href="#什么是-shell-脚本" class="headerlink" title="什么是 shell 脚本"></a>什么是 shell 脚本</h2><p>用户可以通过分支、循环等，将基本的命令组织起来，以达到想要达到的目的。<br>对于一些普通的工作，shell 脚本是优雅的。而且 shell 本身也比较容易学习。</p>
<h2 id="shell-脚本的优缺点"><a href="#shell-脚本的优缺点" class="headerlink" title="shell 脚本的优缺点"></a>shell 脚本的优缺点</h2><h3 id="优点："><a href="#优点：" class="headerlink" title="优点："></a>优点：</h3><ul>
<li>简单易学</li>
<li>依靠强大的命令，开发效率高(这也是代码重用性的一种体现吧)</li>
<li>解释型语言，不需要编译</li>
</ul>
<h3 id="缺点："><a href="#缺点：" class="headerlink" title="缺点："></a>缺点：</h3><ul>
<li>解释型语言的通病，占用资源多，效率不高等</li>
<li>弱类型语言，不会协助类型检查</li>
</ul>
<p>其实 shell 已经足够快了，不必纠结于效率的问题。</p>
<h2 id="为什么要学习-shell-脚本"><a href="#为什么要学习-shell-脚本" class="headerlink" title="为什么要学习 shell 脚本"></a>为什么要学习 shell 脚本</h2><p>对于 Linux 的管理人员来说，shell 脚本编程是必备技能。<br>作为一种编程语言，不敢说以后会不会用到，但是多了解一门语言总是好的。<br>况且 shell 是如此的简单~</p>
<h1 id="开始写-shell-脚本"><a href="#开始写-shell-脚本" class="headerlink" title="开始写 shell 脚本"></a>开始写 shell 脚本</h1><h2 id="第一个-shell-脚本"><a href="#第一个-shell-脚本" class="headerlink" title="第一个 shell 脚本"></a>第一个 shell 脚本</h2><p>学习编程语言，第一个例子总会是输出 Hello, World!</p>
<p>创建一个名为<code>hello_world.sh</code>的文件并键入以下代码:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Helllo, World!"</span></span><br></pre></td></tr></table></figure>
<p>执行这个脚本有两种方式：</p>
<ol>
<li>使用 sh 命令，并以文件名为参数，<code>sh hello_world.sh</code>  </li>
<li>给文件添加执行权限，直接执行 <code>chmod +x hello_world.sh; ./hello_world.sh</code>  </li>
</ol>
<p>shell 文件通常以 <code>.sh</code> 结尾，不加后缀也是可以的，为了区分还是加上。  </p>
<p>shell 以 <code>#</code> 开头为注释，第一行的说明是说明让哪个解释器来执行此脚本。</p>
<p>查看系统的 shell 可以通过查看 <code>/etc/shells</code> 文件。</p>
<p>我比较中意 bash，是因为我中意 GNU。</p>
<p><code>echo</code> 命令可以输出双引号中的字符串并自动添加换行符，如果不想换行可以加上 <code>-n</code> 参数。  </p>
<p>是不是觉得很简单？完全可以理解了吧？  </p>
<p>shell 没有那么复杂，虽然它是用 C 语言来实现的。它不需要你在一开始就弄懂什么是 <code>include</code>，<code>main()</code>,返回值。</p>
<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>shell 是弱类型语言，所以在定义变量的时候不需要声明类型。<br>在下文获取这个变量需要在变量名前面加$，取一个为定义过的变量会返回空。</p>
<h3 id="变量的分类"><a href="#变量的分类" class="headerlink" title="变量的分类"></a>变量的分类</h3><ul>
<li>普通变量<ul>
<li>本地变量：只在程序内部作用</li>
<li>环境变量：在整个环境中作用，定义之后需要使用 <code>export</code> 命令导出</li>
</ul>
</li>
<li>其他变量<ul>
<li>位置变量:<code>$0-$9</code>表示执行脚本时传入的参数，第十个参数以后需要这样,<code>${10}</code></li>
<li>特殊变量:<ul>
<li><code>$?</code>: 上个变量是否执行成功</li>
<li><code>$*</code>: 传入的所有参数</li>
<li><code>$#</code>: 传入的参数个数<br>对于普通变量来说，它可以成为命令的返回值，比如下面这个显示当前系统时间的脚本：（其实本不需要这么做）</li>
</ul>
</li>
</ul>
</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line">current_time=`date`</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Current Time: <span class="variable">$current_time</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'Current Time: $current_time'</span></span><br></pre></td></tr></table></figure>
<p>输出结果跟你预料的一样吗？是的，单引号中得内容被原样输出了。</p>
<p>环境变量，相对于本地变量，在 <code>export</code> 之后可以在每一个 shell 脚本中起作用。<br>查看系统的环境变量可以使用 <code>env</code> 命令。常见的有 PATH、HOME、USER 等。<br>在你需要这个环境变量以后，可以使用 unset 命令，取消设置。</p>
<p>在这里详细叙述一下 PATH 这个环境变量。<br>PATH 是一个字符串，其中包含输入命令时操作系统查找的路径。<br>比如我的 PATH 是：<br><code>PATH=/usr/lib64/qt3.3/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin</code><br>我们输入一个命令的时候，操作系统会依次在这些位置查找命令存在的位置。<br>那么如何修改 PATH 呢？有以下两种方法：<br>第一种是暂时的。在终端输入：PATH=$PATH:/etc，我们便把 /etc 目录加入了 PATH<br>不过重新登录以后就会失效。<br>第二种是永久的。编辑 /etc/profile 文件，在末尾添加 PATH=$PATH:/etc ，这样做不会立即生效，<br>结束编辑后执行 source profile 命令使 PATH 值立即生效。  </p>
<p>再用一个脚本说明位置变量和特殊变量：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Parama 0: <span class="variable">$0</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Parama 1: <span class="variable">$1</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Parama 2: <span class="variable">$2</span>"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"All Paramas: $*"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Count of Paramas: <span class="variable">$#</span>"</span></span><br></pre></td></tr></table></figure>
<p>执行这个脚本并带上两个参数1，2，就像这样 <code>sh var.sh 1 2</code><br>结果正如所预料的那样，脚本的名字被当做第0个参数传入，而总共参数的个数是2个。</p>
<p>对了，再介绍一个 read 关键字，类似于 C语言的 scanf 用来读取用户输入的信息。</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> -n <span class="string">"Please input something:"</span></span><br><span class="line"><span class="built_in">read</span> INPUT</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"Your input is: <span class="variable">$INPUT</span>"</span></span><br></pre></td></tr></table></figure>
<p>read 默认是读取一行的，更多参数可以通过 <code>man</code> 查看。</p>

      
    </div>

    
      
      

  <div class="post-copyright">
    <p class="copyright-item">
      <span>Author: </span>
      <a href="https://x140yu.github.io">X140Yu</a>
    </p>
    <p class="copyright-item">
      <span>Link: </span>
      <a href="https://x140yu.github.io/2014-09-07-shellScript1/">https://x140yu.github.io/2014-09-07-shellScript1/</a>
    </p>
    <p class="copyright-item">
      <span>License: </span>
      
      <a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank">知识共享署名-非商业性使用 4.0 国际许可协议</a>
    </p>
  </div>



      
      
  <div class="post-reward">
    <input type="checkbox" name="reward" id="reward" hidden>
    <label class="reward-button" for="reward">Reward</label>
    <div class="qr-code">
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="http://blog-1258178021.cosbj.myqcloud.com/blog/20181230222906.png" title="wechat">
        </label>
      
      
        <label class="qr-code-image" for="reward">
          <img class="image" src="http://blog-1258178021.cosbj.myqcloud.com/blog/20181230222847.png" title="alipay">
        </label>
      
    </div>
  </div>

    

    
      <footer class="post-footer">
        
          <div class="post-tags">
            
              <a href="/tags/技术/">技术</a>
            
          </div>
        
        
        
  <nav class="post-nav">
    
      <a class="prev" href="/2014-09-10-linux_process/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text nav-default">Linux 进程</span>
        <span class="prev-text nav-mobile">Prev</span>
      </a>
    
    
      <a class="next" href="/2014-05-23-firework/">
        <span class="next-text nav-default">Firwork</span>
        <span class="prev-text nav-mobile">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


      </footer>
    

  </article>


          </div>
          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:zhaoxinyu1994@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
        
          <a href="https://github.com/x140yu" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="https://twitter.com/_X140Yu" class="iconfont icon-twitter" title="twitter"></a>
        
      
    
      
        
          <a href="https://www.instagram.com/x140yu/" class="iconfont icon-instagram" title="instagram"></a>
        
      
    
      
        
          <a href="https://www.zhihu.com/people/X140Yu" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
      
        
          <a href="https://www.douban.com/people/X140Yu/" class="iconfont icon-douban" title="douban"></a>
        
      
    
      
    
      
        
          <a href="https://www.linkedin.com/in/xinyu-zhao/" class="iconfont icon-linkedin" title="linkedin"></a>
        
      
    
      
    
      
    
      
    
      
    

    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>



<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2014 - 
    
    2019

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">X140Yu</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    
  
  <script type="text/javascript">
    var disqus_config = function () {
        this.page.url = 'https://x140yu.github.io/2014-09-07-shellScript1/';
        this.page.identifier = '2014-09-07-shellScript1/';
        this.page.title = '走进 shell script - 变量';
    };
    (function() {
    var d = document, s = d.createElement('script');

    s.src = '//x140yu.disqus.com/embed.js';

    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();  
  </script>

  

  



    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.1"></script>

  </body>
</html>
