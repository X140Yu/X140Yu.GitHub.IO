<!DOCTYPE html>
<html lang="en">
  <head><meta name="generator" content="Hexo 3.9.0">
    
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">


<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">

<meta name="theme-color" content="#f8f5ec">
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="这个人爱好很广泛，这里写不下">













  <link rel="alternate" href="/atom.xml" title="X140Yu's Blog">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.10.1">



<link rel="canonical" href="https://x140yu.github.io/">



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css">




  <link rel="stylesheet" type="text/css" href="/lib/nprogress/nprogress.min.css">



<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.10.1">



  
  <script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e3a87e709bb71d639f8a7b07fe411881";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>



<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-102142985-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-102142985-1');
</script>


  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>





  <script src="//cdn1.lncld.net/static/js/3.1.1/av-min.js"></script>
  <script id="leancloud">
    AV.init({
      appId: "DoDg8Bwgi002rkBzkdWjJhGN-gzGzoHsz",
      appKey: "Uj8vhWY0bvdNySseOuCmtnPB"
    });
  </script>





<script>
  window.config = {"leancloud":{"app_id":"DoDg8Bwgi002rkBzkdWjJhGN-gzGzoHsz","app_key":"Uj8vhWY0bvdNySseOuCmtnPB"},"toc":true,"fancybox":true,"pjax":true};
</script>

    <title> X140Yu's Blog </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">X140Yu's Blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            Home
          
        </li>
      </a>
    
      <a href="/archives/">
        <li class="mobile-menu-item">
          
          
            Archives
          
        </li>
      </a>
    
      <a href="/tags">
        <li class="mobile-menu-item">
          
          
            Tags
          
        </li>
      </a>
    
      <a href="/about">
        <li class="mobile-menu-item">
          
          
            About
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">X140Yu's Blog</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              Home
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            
            
              Archives
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags">
            
            
              Tags
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about">
            
            
              About
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  
  <section id="posts" class="posts">
    
      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2019-08-19-debug-cocoapods/">使用 VSCode debug CocoaPods 和插件源码</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-08-19
        </span>
        
        
        <span class="post-visits" data-url="/2019-08-19-debug-cocoapods/" data-title="使用 VSCode debug CocoaPods 和插件源码">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        

        
          <blockquote>
<p>2019-09-18 更新：GitHub 中已添加了使用 bundler 辅助 debug 的方式，已不需要下面这些 dirty hack，所以本文已没有存在的意义 😳</p>
</blockquote>
<blockquote>
<p>具体步骤可以看这个 <a href="https://github.com/X140Yu/debug_cocoapods_plugins_in_vscode" target="_blank" rel="noopener">GitHub 仓库</a></p>
</blockquote>
<p>前一段时间同事介绍了可以用 <a href="https://www.jetbrains.com/ruby/" target="_blank" rel="noopener">RubyMine</a> 调试 CocoaPods 源码的方法，看后感觉很神奇。因为之前读 CocoaPods 源码不知道如何调试 Ruby 程序，都是用比较原始的打 log 方式，其实挺低效的，毕竟 log + 断点结合起来才是开发 debug 的最好方式。</p>
<p>但比起 JetBrains 家的 IDE，我更喜欢用 VSCode，所以就研究了一下如何使用它来 debug CocoaPods 源码及 CocoaPods 周边插件。</p>
<p>研究过程中有几个点还是挺有趣的，所以写出来分享一下。</p>
<h3 id="如何加载我们手动指定路径的-pod-插件？"><a href="#如何加载我们手动指定路径的-pod-插件？" class="headerlink" title="如何加载我们手动指定路径的 pod 插件？"></a>如何加载我们手动指定路径的 pod 插件？</h3><p>这就要先从 pod 插件的加载过程说起。</p>
<p>CocoaPods 的插件加载是依托于 CLAide 的，具体的查看方法可以看<a href="https://github.com/CocoaPods/CLAide/blob/b5ced9cc141df732e8027078543eb92fc6447567/lib/claide/command/plugin_manager.rb#L72" target="_blank" rel="noopener">这里</a>。CLAide 中的 <code>PluginManager</code> 会遍历所有的 Ruby Gem，并搜索这些 gem 中是否包含名为 <code>#{plugin_prefix}_plugin</code> 的文件。</p>
<p><code>Pod::Command</code> 继承了 <code>CLAide::Command</code>，并声明 <code>plugin_prefix</code> 为 <code>%w(claide cocoapods)</code> 。</p>
<p>也就是说在 pod 命令执行时，<strong>会加载所有包含 <code>claide_plugin.rb</code> 或 <code>cocoapods_plugin.rb</code> 文件的 gem</strong>。</p>
<p>如果插件是通过这种方式加载的话，那 debug 插件就比较困难了，只能把插件通过 <code>rake install</code> 的方式安装在电脑系统中，才能验证插件功能是否正常，是比较低效的。这也是本文出现的原因。</p>
<p>要想实现加载指定路径的 Gem 为 CocoaPods 插件，就需要手动干预这一过程。这一部分的代码在<a href="https://github.com/X140Yu/debug_cocoapods_plugins_in_vscode/blob/master/.vscode/plugin_patch.rb" target="_blank" rel="noopener">这里</a>可以找到（也是本仓库唯一的一点代码），主要过程是 patch 了 <code>Gem::Specification</code> 的 <code>latest_specs</code> 方法，覆盖或追加一个我们指定路径的 gem 到加载的列表中。</p>
<p>如果对 Ruby 是如何查找所有 gems 的过程感到好奇的，可以看<a href="https://github.com/rubygems/rubygems/blob/master/lib/rubygems/specification.rb#L744" target="_blank" rel="noopener">这里</a>，本文不作过多介绍。</p>
<h3 id="覆写一个实例的的方法"><a href="#覆写一个实例的的方法" class="headerlink" title="覆写一个实例的的方法"></a>覆写一个实例的的方法</h3><p>在短短几十行代码中，还 monkey patch 了一个实例的方法，</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">xxxobject</span>.<span class="title">xxx_method</span></span></span><br><span class="line">	puts <span class="string">"replaced"</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>但如果想要在这个方法使用上下文中的变量是不行的，比如这样，</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">some_variable = <span class="string">'a'</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">xxxObject</span>.<span class="title">xxx_method</span></span></span><br><span class="line">	puts some_variable <span class="comment"># NameError - undefined local variable or method `some_variable' for #&lt;XX::XXClass:0x00007f99112754c8&gt;</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>道理也很简单，<code>some_variable</code> 并不在 <code>xxxObject</code> 方法中的作用域内。这里通过把 <code>some_variable</code> 声明成了全局变量缓解了这个问题，但这并不是很好的解决方式，希望有更好解决方式的朋友提出见解。</p>

        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2019-01-26-any-anyobject-in-swift/">Any & AnyObject in Swift</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2019-01-26
        </span>
        
        
        <span class="post-visits" data-url="/2019-01-26-any-anyobject-in-swift/" data-title="Any & AnyObject in Swift">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <blockquote>
<p>这是我 1 月 22 日在知乎 iOS 团队内部的一次分享</p>
<p>这一次没有使用 Keynote，尝试性地全程使用 Playground，效果还不错</p>
<p>Playground 版本可以查看<a href="https://github.com/X140Yu/Any-AnyObject-in-Swift" target="_blank" rel="noopener">这里</a></p>
</blockquote>
          <div class="read-more">
            <a href="/2019-01-26-any-anyobject-in-swift/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018/">2𝟢18</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-12-25
        </span>
        
        
        <span class="post-visits" data-url="/2018/" data-title="2𝟢18">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <h2 id="Numbers"><a href="#Numbers" class="headerlink" title="Numbers"></a>Numbers</h2><!-- Google Photos 在 2018 年底有 24223 张照片 -->
<!-- 香港、清迈、曼谷、杭州、乌镇、苏州 -->
<ul>
<li>80 部 <a href="https://movie.douban.com/people/X140Yu/collect?sort=time&amp;tags_sort=count&amp;filter=all&amp;tag=2018&amp;mode=list" target="_blank" rel="noopener">电影+美剧</a></li>
<li>32938 分钟 <a href="https://spotifywrapped.com" target="_blank" rel="noopener">Spotify</a></li>
<li>8170 <a href="https://photos.google.com/" target="_blank" rel="noopener">照片+视频</a>，<a href="https://500px.com/x140yu" target="_blank" rel="noopener">Some Highlights</a></li>
<li>887 <a href="https://twitter.com/_X140Yu" target="_blank" rel="noopener">tweets</a></li>
<li>11 blogs <a href="https://zhaoxinyu.me/archives/" target="_blank" rel="noopener">X140Yu’s Blog</a></li>
<li>357 contributions <a href="https://github.com/X140Yu" target="_blank" rel="noopener">GitHub</a></li>
<li>7 个没去过的城市</li>
</ul>
          <div class="read-more">
            <a href="/2018/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-11-24-crack-wew/">手把手教你给企业微信 Mac 客户端去除水印</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-11-24
        </span>
        
        
        <span class="post-visits" data-url="/2018-11-24-crack-wew/" data-title="手把手教你给企业微信 Mac 客户端去除水印">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <h2 id="0x01-起因"><a href="#0x01-起因" class="headerlink" title="0x01 起因"></a>0x01 起因</h2><p>最近因为某些原因，公司准备把用了好多年的 Slack 换成企业微信。这其实是件挺正常的事情，公司在不停地发展，什么样的变化都有可能会发生。说不定公司在做大到一定程度以后，做自己的 IM 也不一定。</p>
<p>但如果之前没有用过 Slack 还好，但在用过几年之后，就不免会把它与企业微信之间做一些对比。</p>
<p>我喜欢 Slack 的 <a href="https://get.slack.help/hc/en-us/articles/115000769927-Message-and-file-threads" target="_blank" rel="noopener">Message and file threads</a>、 <a href="https://get.slack.help/hc/en-us/articles/206870317-Emoji-reactions" target="_blank" rel="noopener">Emoji reactions</a> 还有它便捷的 <a href="https://api.slack.com/" target="_blank" rel="noopener">API</a>，这几点企业微信都做的不太好，甚至没有。这还挺让人失望的。</p>
<p>而且它的水印真的很魔性，在聊天界面很显眼。所以我决定用我仅有的一点点<del>逆向工程</del>破解知识，来把它的水印从聊天界面中去除。</p>
          <div class="read-more">
            <a href="/2018-11-24-crack-wew/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-11-02-KeyPath/">KeyPath in iOS</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-11-02
        </span>
        
        
        <span class="post-visits" data-url="/2018-11-02-KeyPath/" data-title="KeyPath in iOS">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <h2 id="KeyPath-in-Objective-C"><a href="#KeyPath-in-Objective-C" class="headerlink" title="KeyPath in Objective-C"></a>KeyPath in Objective-C</h2><p>看下面两段 Objective-C 的代码，</p>
<figure class="highlight objc"><table><tr><td class="code"><pre><span class="line"><span class="comment">// KVC</span></span><br><span class="line">[someObject setValue:someValue forKey:<span class="string">@"someKey"</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// KVO</span></span><br><span class="line">[account addObserver:<span class="keyword">self</span></span><br><span class="line">          forKeyPath:<span class="string">@"balance"</span></span><br><span class="line">             options:<span class="built_in">NSKeyValueObservingOptionNew</span></span><br><span class="line">             context:PersonAccountBalanceContext];</span><br></pre></td></tr></table></figure>
<p>上面的代码存在的一个共同问题是 <code>KeyPath</code> 参数的类型。<code>NSString *</code> 代表你和所谓的编译检查就没有什么关系了。在未来的某一天，如果 property 的名字发生了变化，代码就会出现问题。所以 Objective-C 中的 KeyPath 并不安全（这样的例子在 Objective-C 中并不少见）。</p>
          <div class="read-more">
            <a href="/2018-11-02-KeyPath/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-09-03-trip-to-hk/">香港印象</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-09-03
        </span>
        
        
        <span class="post-visits" data-url="/2018-09-03-trip-to-hk/" data-title="香港印象">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <blockquote>
<p>本文的大部分內容都是五月份在香港的時候用 Notes 記下的，但因為懶，拖到今天才整理 🙈<br>因為内容关于香港，所以索性就用繁體好了</p>
</blockquote>
<p>五月中旬計劃去泰國玩一玩，訂機票的時候發現從香港轉機再過去清邁會便宜一些，而且經過香港去其它國家並不需要提供香港的簽註，只要在入境的時候提供一下後面的行程單就可以了。</p>
          <div class="read-more">
            <a href="/2018-09-03-trip-to-hk/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-08-20-analyze-pods-dependecy/">分析使用 CocoaPods 项目的依赖</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-09-02
        </span>
        
        
        <span class="post-visits" data-url="/2018-08-20-analyze-pods-dependecy/" data-title="分析使用 CocoaPods 项目的依赖">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <blockquote>
<p>在去年，我曾用 electron 写过一个分析使用 CocoaPods 项目依赖的<a href="https://github.com/X140Yu/development-pods-dependency-checker" target="_blank" rel="noopener">工具</a>，当时对 CocoaPods 还不怎么了解，用了一种「非正常」的操作解决了我当时的需求。不过现在，我找到了一种更好的解决方案</p>
</blockquote>
<h2 id="先回顾一下我们的需求"><a href="#先回顾一下我们的需求" class="headerlink" title="先回顾一下我们的需求"></a>先回顾一下我们的需求</h2><p><code>podspec</code> 中列出的 dependecy 在某些情况下要远远比看起来的多得多，尤其是在大量使用 development pods 的情况下。而有些情况，需要确认一个 pod 的全部依赖（比如为这个 pod 创建 Example 工程的时候），这时就需要一个工具来分析了。最终的目标是在拥有一个 podfile 的情况下，把每个依赖的所有依赖都找出来</p>
          <div class="read-more">
            <a href="/2018-08-20-analyze-pods-dependecy/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-04-28-cocoapods-1-5/">升级 CocoaPods 1.5，使用 Swift Static Framework</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-04-28
        </span>
        
        
        <span class="post-visits" data-url="/2018-04-28-cocoapods-1-5/" data-title="升级 CocoaPods 1.5，使用 Swift Static Framework">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <blockquote>
<p>CocoaPods 1.5 is amazing!</p>
</blockquote>
<p><a href="blog.cocoapods.org/CocoaPods-1.5.0/">CocoaPods 1.5</a> 在前一段时间 release 了，其中有一个对于使用了 Swift 的项目非常重要 feature，那就是支持了 Swift 的 Static Framework。</p>
          <div class="read-more">
            <a href="/2018-04-28-cocoapods-1-5/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-04-17-bundler-in-ios-proj/">管理 iOS 项目的 ruby 依赖</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-04-16
        </span>
        
        
        <span class="post-visits" data-url="/2018-04-17-bundler-in-ios-proj/" data-title="管理 iOS 项目的 ruby 依赖">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <p>在多人协作的环境里管理依赖一致性是一件很蛋疼的事情。</p>
          <div class="read-more">
            <a href="/2018-04-17-bundler-in-ios-proj/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-04-16-create-cli-using-gem/">使用 Ruby Gem 创建命令行工具</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-04-16
        </span>
        
        
        <span class="post-visits" data-url="/2018-04-16-create-cli-using-gem/" data-title="使用 Ruby Gem 创建命令行工具">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <p>之前曾经依赖过 Homebrew Formula <a href="https://zhaoxinyu.me/2018-01-24-homebrew-formula/" target="_blank" rel="noopener">创建过基于 Ruby 的命令行工具</a>。但创建过程繁琐，对于依赖的处理不是很友好而且没办法让其它人依赖特定的版本。既然是做基于 Ruby 的 CLI，那为什么不把它做成一个 gem？</p>
          <div class="read-more">
            <a href="/2018-04-16-create-cli-using-gem/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-04-14-what-happends-if-two-frameworks-defines-same-c-functions/">两个 Framework 中如果定义了相同名字的 C 函数会发生什么？</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-04-14
        </span>
        
        
        <span class="post-visits" data-url="/2018-04-14-what-happends-if-two-frameworks-defines-same-c-functions/" data-title="两个 Framework 中如果定义了相同名字的 C 函数会发生什么？">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <blockquote>
<p>本文基于大量猜测，如有错误，请指出 👻</p>
</blockquote>
<h2 id="0x01-起因"><a href="#0x01-起因" class="headerlink" title="0x01 起因"></a>0x01 起因</h2><p>前一段时间给公司的项目升级 CocoaPods 1.5，打算把所有的 Pods 由 Dynamic 变为 Static 集成。在集成完毕调试的时候，到处乱点触发了一次 Crash，堆栈大概长这样，</p>
          <div class="read-more">
            <a href="/2018-04-14-what-happends-if-two-frameworks-defines-same-c-functions/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-04-08-method-dispatch-in-swift-1/">Swift 中的方法调用（Method Dispatch）（一） - 概述</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-04-08
        </span>
        
        
        <span class="post-visits" data-url="/2018-04-08-method-dispatch-in-swift-1/" data-title="Swift 中的方法调用（Method Dispatch）（一） - 概述">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <blockquote>
<p>Objective-C 方法调用的方式是发消息，那 Swift 方法调用的方式是什么呢？搞清楚 Swift 中方法调用的方式，会对于我们理解 Swift 有更好的帮助</p>
<p>Swift 4 &amp; Xcode 9.2</p>
</blockquote>
<p>先看一个最简单的例子，</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="comment">// DogStruct.swift</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">DogStruct</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">func</span> <span class="title">makeNoise</span><span class="params">()</span></span> &#123; </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"bark in struct!"</span>) </span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ds = <span class="type">DogStruct</span>()</span><br><span class="line">ds.makeNoise()</span><br></pre></td></tr></table></figure>
          <div class="read-more">
            <a href="/2018-04-08-method-dispatch-in-swift-1/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-03-12-ios-gitlab-ci/">给 iOS 组件集成 GitLab CI</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-03-12
        </span>
        
        
        <span class="post-visits" data-url="/2018-03-12-ios-gitlab-ci/" data-title="给 iOS 组件集成 GitLab CI">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <p>相信每个人都有这样一个愿景，就是希望自己维护的每一个组件都能跟知名的开源项目一样优秀，有高的代码质量，完整的测试和文档。为了达到这一目的，就需要有 CI 作为项目开发过程中的一个环节介入。在每次 push 或者提交 Merge Request 的时候，CI 可以代替人来做一些事情，编译项目，跑跑测试，做一些静态检测，帮助提交者和 reviewer 及时发现一些简单的问题，提高工作效率。CI 的</p>
          <div class="read-more">
            <a href="/2018-03-12-ios-gitlab-ci/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2018-01-24-homebrew-formula/">使用 Homebrew Formula 搭建命令行工具</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2018-01-24
        </span>
        
        
        <span class="post-visits" data-url="/2018-01-24-homebrew-formula/" data-title="使用 Homebrew Formula 搭建命令行工具">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <p>当团队工程中的脚本过多了以后，就应该考虑把它们组织起来，做成 CLI 了。比起一个个独立的脚本，CLI 更容易升级和维护，也更方便共享代码。</p>
<p>我的初衷就是把所有的脚本放到一个 gitlab 的 repo 中，所有想使用这个工具的人通过很简单的方式就能安装、更新并使用它。</p>
<p>那么问题来了，如何把这些脚本，变成在团队内部，人人都可以安装/升级的 CLI 呢？</p>
<p>我的选择是 Homebrew Formula。</p>
          <div class="read-more">
            <a href="/2018-01-24-homebrew-formula/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
        
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2017-11-14-Phantom-Types/">Phantom Types in Swift</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2017-11-14
        </span>
        
        
        <span class="post-visits" data-url="/2017-11-14-Phantom-Types/" data-title="Phantom Types in Swift">
          阅读次数 0
        </span>
        
      </div>
    </header>

    
    


    <div class="post-content">
      
        
        
          
        

        
          <p>在 Objc.io 上看到了这样<a href="https://talk.objc.io/episodes/S01E71-type-safe-file-paths-with-phantom-types" target="_blank" rel="noopener">一期视频</a>。主要介绍了一种叫 Phantom Types 的技巧，它的作用就是在类型（type），而不是值（value）这个层面上来表示状态，而且在编译时期对错误类型间的运算做出提示。</p>
<p>Phantom Types（幽灵类型） 其实就是空类型。比如这样，</p>
<figure class="highlight swift"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Miles</span> </span>&#123;&#125;</span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">Kilometers</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure>
<p>它比较实际的一个应用是，让编译器帮你检查某些对象在特定的状态下能够调用哪些方法。也能通过类型来表示状态。</p>
          <div class="read-more">
            <a href="/2017-11-14-Phantom-Types/" class="read-more-link">Read more..</a>
          </div>
        
      
    </div>

    

    

  </article>

      
      
  <nav class="pagination">
    
    
      <a class="next" href="/page/2/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    
  </nav>


    
  </section>

          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:zhaoxinyu1994@gmail.com" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
        
          <a href="https://github.com/x140yu" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="https://twitter.com/_X140Yu" class="iconfont icon-twitter" title="twitter"></a>
        
      
    
      
        
          <a href="https://www.instagram.com/x140yu/" class="iconfont icon-instagram" title="instagram"></a>
        
      
    
      
        
          <a href="https://www.zhihu.com/people/X140Yu" class="iconfont icon-zhihu" title="zhihu"></a>
        
      
    
      
        
          <a href="https://www.douban.com/people/X140Yu/" class="iconfont icon-douban" title="douban"></a>
        
      
    
      
    
      
        
          <a href="https://www.linkedin.com/in/xinyu-zhao/" class="iconfont icon-linkedin" title="linkedin"></a>
        
      
    
      
    
      
    
      
    
      
    

    
      <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    
  </div>



<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">
    
    &copy; 
     
      2014 - 
    
    2019

    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">X140Yu</span>
  </span>
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    
  



  
  





  
    <script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  

  
    <script type="text/javascript" src="/lib/pjax/jquery.pjax.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/nprogress/nprogress.min.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.10.1"></script>

  </body>
</html>
